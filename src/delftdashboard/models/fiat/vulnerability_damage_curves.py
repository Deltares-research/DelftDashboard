# -*- coding: utf-8 -*-
"""
Created on Mon May 10 12:18:09 2021

@author: ormondt
"""

from delftdashboard.app import app
from delftdashboard.operations import map


def select(*args):
    # De-activate existing layers
    map.update()


def add_damage_curves(*args):
    selected_damage_curves = app.gui.getvar("fiat", "selected_damage_curve_database")
    selected_link_table = app.gui.getvar("fiat", "selected_damage_curve_linking_table")
    app.model["fiat"].domain.vulnerability_vm.add_vulnerability_curves_to_model(selected_damage_curves, selected_link_table)

    # Check the checkbox
    app.gui.setvar("_main", "checkbox_vulnerability", True)

def edit(*args):
    app.model["fiat"].set_model_variables()


def activate_create_curves_panel(*args):
    app.gui.setvar("fiat", "create_curves", True)


def specify_damage_curves(*args):
    app.model["fiat"].damage_curves_specify()


def set_hazus_curves(*args):
    list_curves = app.model["fiat"].domain.vulnerability_vm.get_hazus_curves()
    app.gui.setvar("fiat", "created_vulnerability_curves_string", list_curves)
    app.gui.setvar("fiat", "created_vulnerability_curves_value", list_curves)
    app.gui.setvar(
        "fiat", "text_feedback_vulnerability_source_input", "Hazus curves loaded"
    )
